# templates/tests/test-connection.yaml

apiVersion: v1
kind: Pod
metadata:
  name: "{{ .Release.Name }}-test-connection"
  labels:
    {{- include "my-website.labels" . | nindent 4 }}
spec:
  containers:
    - name: wget-blue
      image: busybox
      command: ['wget']
      args: ['-qO-', 'http://{{ .Release.Name }}-website-blue:{{ .Values.websiteBlue.service.port }}']
    - name: wget-green
      image: busybox
      command: ['wget']
      args: ['-qO-', 'http://{{ .Release.Name }}-website-green:{{ .Values.websiteGreen.service.port }}']
    - name: wget-yellow
      image: busybox
      command: ['wget']
      args: ['-qO-', 'http://{{ .Release.Name }}-website-yellow:{{ .Values.websiteYellow.service.port }}']
  restartPolicy: Never
